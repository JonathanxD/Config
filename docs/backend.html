<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Backends - Config Documentation</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="backend.html" class="active"><strong aria-hidden="true">1.1.</strong> Backends</a></li><li class="chapter-item expanded "><a href="config.html"><strong aria-hidden="true">1.2.</strong> Config class</a></li><li class="chapter-item expanded "><a href="key_and_keyspec.html"><strong aria-hidden="true">1.3.</strong> Key and KeySpace</a></li><li class="chapter-item expanded "><a href="serializers.html"><strong aria-hidden="true">1.4.</strong> Serializers</a></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">1.5.</strong> Getting Started</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Config Documentation</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="backend-class"><a class="header" href="#backend-class"><code>Backend</code> class</a></h1>
<p>Config itself does not implement any configuration format, instead, it backs the configuration loading and saving logic to a backend.</p>
<p>Currently, the following backend implementations are officially supported:</p>
<ul>
<li>Config-Jackson (Using <a href="https://github.com/FasterXML/jackson">fasterxml.jackson</a>)</li>
<li>Config-XML (Using <a href="https://github.com/FasterXML/jackson-dataformat-xml">fasterxml.jackson-xml</a>)</li>
<li>Config-Json (Using <a href="https://github.com/fangyidong/json-simple">JSON.simple</a>)</li>
<li>Config-Yaml (Using <a href="https://bitbucket.org/asomov/snakeyaml/">snakeyaml</a> YAML 1.1 compliant)</li>
<li>Config-Yaml-1.2 (Using <a href="https://bitbucket.org/asomov/snakeyaml-engine/">snakeyaml-engine</a> YAML 1.2 compliant)</li>
<li>Config-Toml (Using <a href="https://github.com/tomlj/tomlj">tomlj</a> 1.0.0-rc.1 compliant. With an experimental renderer, as of the time the implementation was written, there is no official TOML writer for Java).</li>
</ul>
<p>You could choose one of these backends to load and save your configuration. Also, you are free to write your own Backend implementation, as they are very simple. Config works solely with Java <code>Map</code>, <code>List</code>, <code>String</code> and primitive types.</p>
<p>Also, Config is not a real-time configuration editor, it will not save the configuration for every update that occurs in the Config object, you need to manually save and load using <code>Config.save</code> and <code>Config.load</code>. If you need a real-time configuration editor with reload capabilities, you could easily write a File Watcher or Scheduler to reload configuration using those methods.</p>
<h2 id="jackson-backend"><a class="header" href="#jackson-backend">Jackson Backend</a></h2>
<p>Writes and reads json using Jackson <a href="https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html">ObjectMapper</a>.</p>
<h2 id="jackson-xml-backend"><a class="header" href="#jackson-xml-backend">Jackson-XML Backend</a></h2>
<p>Writes and reads XML using Jackson <a href="https://www.javadoc.io/doc/com.fasterxml.jackson.dataformat/jackson-dataformat-xml/latest/com/fasterxml/jackson/dataformat/xml/XmlMapper.html">XmlMapper</a>.</p>
<h2 id="json-backend"><a class="header" href="#json-backend">Json backend</a></h2>
<p>Writes and reads json using <a href="https://code.google.com/archive/p/json-simple/">JSON.simple</a>.</p>
<h2 id="yaml-backend"><a class="header" href="#yaml-backend">Yaml Backend</a></h2>
<p>Writes and reads Yaml 1.1 using <a href="https://bitbucket.org/asomov/snakeyaml">snakeyaml</a>.</p>
<h2 id="toml-backend"><a class="header" href="#toml-backend">Toml Backend</a></h2>
<p>Reads TOML compliant to 1.0.0-rc.1 using <a href="https://github.com/tomlj/tomlj">tomlj</a> and writes TOML using a custom implementation of TOML rendering.</p>
<h3 id="note"><a class="header" href="#note">Note</a></h3>
<p>The Toml backend is able to read any TOML configuration file compliant to 1.0.0-rc.1, however, for writing Toml config, it uses an experimental renderer as there is no recent and maintained Toml library for Java which allows Toml rendering.</p>
<p>This means that Toml files saved by TOML backend ends up being different from the original, and is not rendered in the best way it could be following the Toml standards.</p>
<h2 id="yaml-12-backend"><a class="header" href="#yaml-12-backend">YAML 1.2 Backend</a></h2>
<p>Reads and writes Yaml 1.2 using <a href="https://bitbucket.org/asomov/snakeyaml-engine/">snakeyaml-engine</a>.</p>
<h3 id="note-1"><a class="header" href="#note-1">Note</a></h3>
<p>There is a Yaml 1.2 backend which uses snakeyaml-engine to read and write yaml files, however, since <code>Config</code> is fully map-oriented, yaml files which does not have any keys, like this one:</p>
<pre><code class="language-yaml">- First
- Second
- Third
</code></pre>
<p>Are loaded normally, but an intermediate section is created, named <code>.</code>. This section allows loading those values normally, and rendering them is made through a special logic which keeps this structure (as long as there is no new keys defined).</p>
<p>Also, <code>Config</code> calls the <code>Backend</code> to resolve the root key, then the Yaml backend resolve the <code>.</code> as default key, thus allowing to load those values seamlessly without careing about the intermediate section:</p>
<pre><code class="language-java">public class ConfigLoader {
    public static Config loadYaml() {
        // Yaml loading logic...
        Config config = new Config(new YamlBackend(...));
        TypeInfo&lt;List&lt;String&gt;&gt; stringListTypeInfo = TypeInfo.builderOf(List.class).of(String.class).buildGeneric();
        Key&lt;List&lt;String&gt;&gt; values = config.getRootKey().getAs(stringListTypeInfo);
    }
}
</code></pre>
<p>It is important to know this, because creating a configuration with a key named <code>.</code> with a List value will trigger this behavior. But only for Yaml 1.2 backend.</p>
<h3 id="maps-inside-the-list"><a class="header" href="#maps-inside-the-list">Maps inside the List</a></h3>
<p>When there is a map inside the list, like this:</p>
<pre><code class="language-yaml">- First
- Second
- Third
- Somedata: value
</code></pre>
<p>Config will be able to handle this situation, but with limited capabilities. It is able to resolve the <code>somedata</code> key and change its value:</p>
<pre><code class="language-java">public class ConfigLoader {
    public static Config loadYaml() {
        // Yaml loading logic...
        Config config = new Config(new YamlBackend(...));
        Key&lt;List&lt;Object&gt;&gt; values = config.getRootKey().getAs(CommonTypes.LIST_OF_OBJECT);
        Key&lt;String&gt; somedata = values.getKey(&quot;somedata&quot;, String.class);
        somedata.setValue(&quot;newValue&quot;);
    }
}
</code></pre>
<p>It is able to create new maps inside the list when needed:</p>
<pre><code class="language-java">public class ConfigLoader {
    public static Config loadYaml() {
        // Yaml loading logic...
        Config config = new Config(new YamlBackend(...));
        Key&lt;List&lt;Object&gt;&gt; values = config.getRootKey().getAs(CommonTypes.LIST_OF_OBJECT);
        Key&lt;String&gt; somedata = values.getKey(&quot;somedata2&quot;, String.class); // new map is created to handle this key
        somedata.setValue(&quot;newValue2&quot;); 
    }
}
</code></pre>
<p>And access and change values in a specific index of a list (which must exists):</p>
<pre><code class="language-java">public class ConfigLoader {
    public static Config loadYaml() {
        // Yaml loading logic...
        Config config = new Config(new YamlBackend(...));
        Key&lt;List&lt;Object&gt;&gt; values = config.getRootKey().getAs(CommonTypes.LIST_OF_OBJECT);
        Key&lt;String&gt; index0 = IndexKey.forKeyAndIndex(values, 0);
        index0.setValue(&quot;newValue2&quot;); 
    }
}
</code></pre>
<p>However, not all features that Yaml 1.2 supports were tested.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="config.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="config.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
